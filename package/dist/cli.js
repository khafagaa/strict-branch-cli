#!/usr/bin/env node
const a1_0xbe8537=a1_0x1aab;function a1_0x1aab(_0x1b3468,_0x84194a){const _0x5c4f24=a1_0x5496();return a1_0x1aab=function(_0x1c53c0,_0x8f451b){_0x1c53c0=_0x1c53c0-0xfe;let _0x5496ed=_0x5c4f24[_0x1c53c0];return _0x5496ed;},a1_0x1aab(_0x1b3468,_0x84194a);}function a1_0x5496(){const _0x53305f=['48072PaKkPK','390GfrRqn','includes','‚ùå\x20\x20Exit','configure','blue','üå±\x20\x20Create\x20new\x20branch','6969640nMaJxJ','Configure:','exit','9pQIQPM','stringify','1688VRtqPc','commandType','üî¢\x20\x20Change\x20ticket\x20format','back','feature','dim','textSync','What\x20would\x20you\x20like\x20to\x20do?','hasTicket','reset','toString','format','bold','list','hotfix','replace','29687noNBNJ','‚úèÔ∏è\x20\x20Change\x20branch\x20names','‚öôÔ∏è\x20\x20Configure\x20settings','baseBranch','ANSI\x20Shadow','2747WiEVwW','5013613ppgBFr','full','error','üîô\x20\x20Back\x20to\x20main\x20menu','7063572MEbfMr','search','\x20A\x20structured\x20Git\x20branch\x20workflow\x0a','cwd','red','\x0a‚úó\x20Failed:\x20','prompt','.strictbranchrc','new_branch','2657541aqaZhL','bgBlack','ticketFormat','cyan','constructor','[a-zA-Z]','4pCbfEP','bugfix','apply','log','\x0aThanks\x20for\x20using\x20Strict-Branch\x20CLI!\x20üëã\x0a','(((.+)+)+)+$','test','yellowBright','branches','758djzMuX','action'];a1_0x5496=function(){return _0x53305f;};return a1_0x5496();}(function(_0xa3de7b,_0x82b06){const _0x35e16c=a1_0x1aab,_0x352828=_0xa3de7b();while(!![]){try{const _0x11c06b=parseInt(_0x35e16c(0x107))/0x1*(parseInt(_0x35e16c(0x124))/0x2)+parseInt(_0x35e16c(0x115))/0x3*(parseInt(_0x35e16c(0x11b))/0x4)+parseInt(_0x35e16c(0x127))/0x5*(-parseInt(_0x35e16c(0x126))/0x6)+parseInt(_0x35e16c(0x102))/0x7*(-parseInt(_0x35e16c(0x132))/0x8)+-parseInt(_0x35e16c(0x130))/0x9*(parseInt(_0x35e16c(0x12d))/0xa)+parseInt(_0x35e16c(0x108))/0xb+parseInt(_0x35e16c(0x10c))/0xc;if(_0x11c06b===_0x82b06)break;else _0x352828['push'](_0x352828['shift']());}catch(_0x20021d){_0x352828['push'](_0x352828['shift']());}}}(a1_0x5496,0xb83bf));const a1_0x8f451b=(function(){let _0x52d249=!![];return function(_0x5ea3f0,_0x20cc01){const _0x556021=_0x52d249?function(){const _0x3dafb9=a1_0x1aab;if(_0x20cc01){const _0x497693=_0x20cc01[_0x3dafb9(0x11d)](_0x5ea3f0,arguments);return _0x20cc01=null,_0x497693;}}:function(){};return _0x52d249=![],_0x556021;};}()),a1_0x1c53c0=a1_0x8f451b(this,function(){const _0x320796=a1_0x1aab;return a1_0x1c53c0[_0x320796(0x13c)]()['search']('(((.+)+)+)+$')[_0x320796(0x13c)]()[_0x320796(0x119)](a1_0x1c53c0)[_0x320796(0x10d)](_0x320796(0x120));});a1_0x1c53c0();import a1_0x381455 from'chalk';import a1_0x3e31aa from'figlet';import a1_0x4a5ae2 from'inquirer';import a1_0x268ecb from'path';import{simpleGit}from'simple-git';import{askBranchDescription,askBranchType,askEnhanceType,askTicketId}from'./asks.js';import{createBranch,getStoredBranches}from'./storage.js';import{requireInitialSetup,resetAllSettings,updateBranchNames,updateTicketFormat}from'./utils.js';const git=simpleGit(),CONFIG_PATH=a1_0x268ecb['resolve'](process[a1_0xbe8537(0x10f)](),a1_0xbe8537(0x113)),showHeader=()=>{const _0x2a85f3=a1_0xbe8537;console[_0x2a85f3(0x11e)](a1_0x381455[_0x2a85f3(0xfe)][_0x2a85f3(0x116)][_0x2a85f3(0x122)](a1_0x3e31aa[_0x2a85f3(0x138)]('STRICT-BRANCH',{'font':_0x2a85f3(0x106),'horizontalLayout':_0x2a85f3(0x109)}))),console[_0x2a85f3(0x11e)](a1_0x381455[_0x2a85f3(0x137)](_0x2a85f3(0x10e)));},showMainMenu=async()=>{const _0x405b2f=a1_0xbe8537,{commandType:_0x272917}=await a1_0x4a5ae2[_0x405b2f(0x112)]([{'name':_0x405b2f(0x133),'type':_0x405b2f(0xff),'message':a1_0x381455[_0x405b2f(0x12b)][_0x405b2f(0xfe)](_0x405b2f(0x139)),'choices':[{'name':_0x405b2f(0x12c),'value':_0x405b2f(0x114)},{'name':_0x405b2f(0x104),'value':_0x405b2f(0x12a)},{'name':_0x405b2f(0x129),'value':'exit'}]}]);return _0x272917;},generateRegexFromFormat=_0x122dad=>{const _0x3d94b9=a1_0xbe8537;let _0x6a0f53='^';for(const _0x1a3bf3 of _0x122dad){if(/\d/[_0x3d94b9(0x121)](_0x1a3bf3))_0x6a0f53+='\x5cd';else{if(/[a-zA-Z]/[_0x3d94b9(0x121)](_0x1a3bf3))_0x6a0f53+=_0x3d94b9(0x11a);else _0x1a3bf3==='-'||_0x1a3bf3==='_'?_0x6a0f53+='\x5c'+_0x1a3bf3:_0x6a0f53+='.';}}return _0x6a0f53+='$',new RegExp(_0x6a0f53);},runConfiguration=async()=>{const _0x545be6=a1_0xbe8537;while(!![]){console['log'](a1_0x381455['yellow']('\x0aCurrent\x20configuration:'));const _0x47e93d=getStoredBranches();console['log'](a1_0x381455[_0x545be6(0x137)](JSON[_0x545be6(0x131)](_0x47e93d,null,0x2)));const {action:_0xea8315}=await a1_0x4a5ae2['prompt']([{'name':_0x545be6(0x125),'type':_0x545be6(0xff),'message':_0x545be6(0x12e),'choices':[{'name':_0x545be6(0x103),'value':_0x545be6(0x123)},{'name':_0x545be6(0x134),'value':_0x545be6(0x13d)},{'name':'üîÑ\x20\x20Reset\x20all\x20settings','value':_0x545be6(0x13b)},{'name':_0x545be6(0x10b),'value':_0x545be6(0x135)}]}]);switch(_0xea8315){case _0x545be6(0x123):await updateBranchNames();break;case'format':await updateTicketFormat();break;case _0x545be6(0x13b):await resetAllSettings();break;case'back':return;}}},runBranchCreation=async()=>{const _0x4f264c=a1_0xbe8537,_0x3f96a7=await requireInitialSetup(),{branchType:_0x240f60}=await askBranchType();let _0x2396a9=_0x240f60;if([_0x4f264c(0x136),_0x4f264c(0x11c),'hotfix'][_0x4f264c(0x128)](_0x240f60)){const {ticketId:_0x47718f}=await askTicketId(generateRegexFromFormat(_0x3f96a7['ticketFormat']),_0x3f96a7[_0x4f264c(0x117)]);_0x2396a9+='/'+_0x47718f;}else{if(_0x240f60==='enhance'&&(await askEnhanceType())[_0x4f264c(0x13a)]){const {ticketId:_0x2ed5ad}=await askTicketId(generateRegexFromFormat(_0x3f96a7[_0x4f264c(0x117)]),_0x3f96a7[_0x4f264c(0x117)]);_0x2396a9+='/'+_0x2ed5ad;}}const {branchDescription:_0x2b6e77}=await askBranchDescription();_0x2396a9+='_'+_0x2b6e77[_0x4f264c(0x101)](/\s+/g,'-');try{const _0xc75808=_0x240f60===_0x4f264c(0x100)?_0x3f96a7['prodBranch']:_0x3f96a7[_0x4f264c(0x105)];await createBranch(_0x2396a9,_0xc75808),console[_0x4f264c(0x11e)](a1_0x381455['green'][_0x4f264c(0xfe)]('\x0a‚úì\x20Created\x20branch:\x20'+a1_0x381455[_0x4f264c(0x118)](_0x2396a9)));}catch(_0x5595f4){console[_0x4f264c(0x10a)](a1_0x381455[_0x4f264c(0x110)]['bold'](_0x4f264c(0x111)+_0x5595f4['message']));}},runCLI=async()=>{const _0x4d69e6=a1_0xbe8537;showHeader();try{const _0x5a4aee=getStoredBranches();console['log'](_0x5a4aee);(!_0x5a4aee[_0x4d69e6(0x105)]||!_0x5a4aee['prodBranch']||!_0x5a4aee[_0x4d69e6(0x117)])&&await requireInitialSetup();let _0x80eb44;do{_0x80eb44=await showMainMenu();switch(_0x80eb44){case _0x4d69e6(0x114):await runBranchCreation();break;case _0x4d69e6(0x12a):await runConfiguration();break;}}while(_0x80eb44!==_0x4d69e6(0x12f));console[_0x4d69e6(0x11e)](a1_0x381455[_0x4d69e6(0x137)](_0x4d69e6(0x11f)));}catch(_0xe61089){console[_0x4d69e6(0x10a)](a1_0x381455[_0x4d69e6(0x110)][_0x4d69e6(0xfe)]('\x0a‚ö†Ô∏è\x20\x20Error:\x20'+_0xe61089['message'])),process[_0x4d69e6(0x12f)](0x1);}};runCLI();