#!/usr/bin/env node
const a1_0x46944d=a1_0x36b8;(function(_0x8444e6,_0x21acc5){const _0x53fdc2=a1_0x36b8,_0x25bb4a=_0x8444e6();while(!![]){try{const _0x13d6ab=-parseInt(_0x53fdc2(0x1ed))/0x1*(-parseInt(_0x53fdc2(0x1bb))/0x2)+-parseInt(_0x53fdc2(0x1f7))/0x3*(-parseInt(_0x53fdc2(0x1df))/0x4)+parseInt(_0x53fdc2(0x1e0))/0x5+parseInt(_0x53fdc2(0x1bd))/0x6*(parseInt(_0x53fdc2(0x1ce))/0x7)+parseInt(_0x53fdc2(0x1de))/0x8+parseInt(_0x53fdc2(0x1eb))/0x9+parseInt(_0x53fdc2(0x1cb))/0xa*(-parseInt(_0x53fdc2(0x1bc))/0xb);if(_0x13d6ab===_0x21acc5)break;else _0x25bb4a['push'](_0x25bb4a['shift']());}catch(_0xdf2e77){_0x25bb4a['push'](_0x25bb4a['shift']());}}}(a1_0x20cc,0x45b16));const a1_0x5365e5=(function(){let _0x3cf6d5=!![];return function(_0x2e87e7,_0x57f26b){const _0x46813c=_0x3cf6d5?function(){const _0x2a750b=a1_0x36b8;if(_0x57f26b){const _0x20ad62=_0x57f26b[_0x2a750b(0x1c5)](_0x2e87e7,arguments);return _0x57f26b=null,_0x20ad62;}}:function(){};return _0x3cf6d5=![],_0x46813c;};}()),a1_0x37d2ac=a1_0x5365e5(this,function(){const _0x4b27e4=a1_0x36b8;return a1_0x37d2ac['toString']()[_0x4b27e4(0x1d1)](_0x4b27e4(0x1d7))[_0x4b27e4(0x1d9)]()[_0x4b27e4(0x1ef)](a1_0x37d2ac)['search'](_0x4b27e4(0x1d7));});a1_0x37d2ac();import a1_0x5e7dd5 from'chalk';function a1_0x36b8(_0x13630b,_0x539a04){const _0x42308f=a1_0x20cc();return a1_0x36b8=function(_0x37d2ac,_0x5365e5){_0x37d2ac=_0x37d2ac-0x1b9;let _0x20cc27=_0x42308f[_0x37d2ac];return _0x20cc27;},a1_0x36b8(_0x13630b,_0x539a04);}import a1_0x3faec0 from'figlet';import a1_0x3a39ea from'inquirer';import a1_0x576bbd from'path';import{simpleGit}from'simple-git';import{askBranchDescription,askBranchType,askEnhanceType,askTicketId}from'./asks.js';import{createBranch,getStoredBranches}from'./storage.js';import{requireInitialSetup,resetAllSettings,updateBranchNames,updateTicketFormat}from'./utils.js';function a1_0x20cc(){const _0x107061=['2753360LwXubj','118212sVjVZY','1103575BZPzEb','commandType','exit','includes','prompt','\x0a✓\x20Created\x20branch:\x20','bold','stringify','\x0a✗\x20Failed:\x20','yellow','✏️\x20\x20\x20Change\x20branch\x20names','4873734pCNndl','\x0aCurrent\x20configuration:','1HYZJYi','back','constructor','STRICT-BRANCH','ticketFormat','yellowBright','format','full','configure','cwd','6LjrSrI','reset','action','cyan','test','dim','414148UXIIPI','602833XOcSBl','6ePPZqS','\x0a⚠️\x20\x20Error:\x20','replace','hasTicket','prodBranch','baseBranch','hotfix','textSync','apply','ANSI\x20Shadow','green','new_branch','error','list','270nptLBs','What\x20would\x20you\x20like\x20to\x20do?','[a-zA-Z]','2747864hUhxEJ','log','blue','search','.strictbranchrc','\x20A\x20structured\x20Git\x20branch\x20workflow\x0a','branches','🔙\x20\x20Back\x20to\x20main\x20menu','feature','(((.+)+)+)+$','\x0aThanks\x20for\x20using\x20Strict-Branch\x20CLI!\x20👋\x0a','toString','⚙️\x20\x20Configure\x20settings','🔄\x20\x20Reset\x20all\x20settings','Configure:','message'];a1_0x20cc=function(){return _0x107061;};return a1_0x20cc();}const git=simpleGit(),CONFIG_PATH=a1_0x576bbd['resolve'](process[a1_0x46944d(0x1f6)](),a1_0x46944d(0x1d2)),showHeader=()=>{const _0x4d09f4=a1_0x46944d;console[_0x4d09f4(0x1cf)](a1_0x5e7dd5['bold']['bgBlack'][_0x4d09f4(0x1f2)](a1_0x3faec0[_0x4d09f4(0x1c4)](_0x4d09f4(0x1f0),{'font':_0x4d09f4(0x1c6),'horizontalLayout':_0x4d09f4(0x1f4)}))),console[_0x4d09f4(0x1cf)](a1_0x5e7dd5[_0x4d09f4(0x1ba)](_0x4d09f4(0x1d3)));},showMainMenu=async()=>{const _0x4262cf=a1_0x46944d,{commandType:_0xca9acf}=await a1_0x3a39ea[_0x4262cf(0x1e4)]([{'name':_0x4262cf(0x1e1),'type':_0x4262cf(0x1ca),'message':a1_0x5e7dd5[_0x4262cf(0x1d0)][_0x4262cf(0x1e6)](_0x4262cf(0x1cc)),'choices':[{'name':'🌱\x20\x20Create\x20new\x20branch','value':_0x4262cf(0x1c8)},{'name':_0x4262cf(0x1da),'value':'configure'},{'name':'❌\x20\x20Exit','value':_0x4262cf(0x1e2)}]}]);return _0xca9acf;},generateRegexFromFormat=_0x28e52b=>{const _0x3afdbf=a1_0x46944d;let _0x469e92='^';for(const _0x5b597b of _0x28e52b){if(/\d/[_0x3afdbf(0x1b9)](_0x5b597b))_0x469e92+='\x5cd';else{if(/[a-zA-Z]/[_0x3afdbf(0x1b9)](_0x5b597b))_0x469e92+=_0x3afdbf(0x1cd);else _0x5b597b==='-'||_0x5b597b==='_'?_0x469e92+='\x5c'+_0x5b597b:_0x469e92+='.';}}return _0x469e92+='$',new RegExp(_0x469e92);},runConfiguration=async()=>{const _0x2c49af=a1_0x46944d;while(!![]){console[_0x2c49af(0x1cf)](a1_0x5e7dd5[_0x2c49af(0x1e9)](_0x2c49af(0x1ec)));const _0x1ddce3=getStoredBranches();console[_0x2c49af(0x1cf)](a1_0x5e7dd5[_0x2c49af(0x1ba)](JSON[_0x2c49af(0x1e7)](_0x1ddce3,null,0x2)));const {action:_0x6bd17b}=await a1_0x3a39ea[_0x2c49af(0x1e4)]([{'name':_0x2c49af(0x1f9),'type':_0x2c49af(0x1ca),'message':_0x2c49af(0x1dc),'choices':[{'name':_0x2c49af(0x1ea),'value':_0x2c49af(0x1d4)},{'name':'🔢\x20\x20Change\x20ticket\x20format','value':'format'},{'name':_0x2c49af(0x1db),'value':_0x2c49af(0x1f8)},{'name':_0x2c49af(0x1d5),'value':'back'}]}]);switch(_0x6bd17b){case _0x2c49af(0x1d4):await updateBranchNames();break;case _0x2c49af(0x1f3):await updateTicketFormat();break;case _0x2c49af(0x1f8):await resetAllSettings();break;case _0x2c49af(0x1ee):return;}}},runBranchCreation=async()=>{const _0x25117a=a1_0x46944d,_0x2c25c7=await requireInitialSetup(),{branchType:_0x4bc264}=await askBranchType();let _0x82df1d=_0x4bc264;if([_0x25117a(0x1d6),'bugfix',_0x25117a(0x1c3)][_0x25117a(0x1e3)](_0x4bc264)){const {ticketId:_0x2fe6fc}=await askTicketId(generateRegexFromFormat(_0x2c25c7[_0x25117a(0x1f1)]),_0x2c25c7['ticketFormat']);_0x82df1d+='/'+_0x2fe6fc;}else{if(_0x4bc264==='enhance'&&(await askEnhanceType())[_0x25117a(0x1c0)]){const {ticketId:_0x32ba36}=await askTicketId(generateRegexFromFormat(_0x2c25c7[_0x25117a(0x1f1)]),_0x2c25c7[_0x25117a(0x1f1)]);_0x82df1d+='/'+_0x32ba36;}}const {branchDescription:_0x4de6ec}=await askBranchDescription();_0x82df1d+='_'+_0x4de6ec[_0x25117a(0x1bf)](/\s+/g,'-');try{const _0x4f6e52=_0x4bc264===_0x25117a(0x1c3)?_0x2c25c7[_0x25117a(0x1c1)]:_0x2c25c7['baseBranch'];await createBranch(_0x82df1d,_0x4f6e52),console[_0x25117a(0x1cf)](a1_0x5e7dd5[_0x25117a(0x1c7)]['bold'](_0x25117a(0x1e5)+a1_0x5e7dd5[_0x25117a(0x1fa)](_0x82df1d)));}catch(_0x2254c3){console[_0x25117a(0x1c9)](a1_0x5e7dd5['red'][_0x25117a(0x1e6)](_0x25117a(0x1e8)+_0x2254c3[_0x25117a(0x1dd)]));}},runCLI=async()=>{const _0x235576=a1_0x46944d;showHeader();try{const _0x4d53ab=getStoredBranches();console[_0x235576(0x1cf)](_0x4d53ab);(!_0x4d53ab[_0x235576(0x1c2)]||!_0x4d53ab[_0x235576(0x1c1)]||!_0x4d53ab[_0x235576(0x1f1)])&&await requireInitialSetup();let _0x1bec0e;do{_0x1bec0e=await showMainMenu();switch(_0x1bec0e){case _0x235576(0x1c8):await runBranchCreation();break;case _0x235576(0x1f5):await runConfiguration();break;}}while(_0x1bec0e!==_0x235576(0x1e2));console[_0x235576(0x1cf)](a1_0x5e7dd5[_0x235576(0x1ba)](_0x235576(0x1d8)));}catch(_0x18a7a1){console[_0x235576(0x1c9)](a1_0x5e7dd5['red'][_0x235576(0x1e6)](_0x235576(0x1be)+_0x18a7a1[_0x235576(0x1dd)])),process[_0x235576(0x1e2)](0x1);}};runCLI();