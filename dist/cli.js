#!/usr/bin/env node
function a1_0x2876(_0x3101f0,_0x390f39){const _0x3e005d=a1_0x3e00();return a1_0x2876=function(_0x2876f2,_0x5daf24){_0x2876f2=_0x2876f2-0x9a;let _0x7be600=_0x3e005d[_0x2876f2];return _0x7be600;},a1_0x2876(_0x3101f0,_0x390f39);}const a1_0xa57907=a1_0x2876;(function(_0x1f7c24,_0x5a8307){const _0x23855d=a1_0x2876,_0x5bb7e7=_0x1f7c24();while(!![]){try{const _0x25bc75=-parseInt(_0x23855d(0xbd))/0x1+-parseInt(_0x23855d(0xab))/0x2+-parseInt(_0x23855d(0xa7))/0x3*(-parseInt(_0x23855d(0xc1))/0x4)+parseInt(_0x23855d(0xc6))/0x5*(parseInt(_0x23855d(0xca))/0x6)+parseInt(_0x23855d(0xb3))/0x7*(-parseInt(_0x23855d(0xba))/0x8)+-parseInt(_0x23855d(0xaa))/0x9*(parseInt(_0x23855d(0xa8))/0xa)+parseInt(_0x23855d(0xc4))/0xb;if(_0x25bc75===_0x5a8307)break;else _0x5bb7e7['push'](_0x5bb7e7['shift']());}catch(_0x3a79c2){_0x5bb7e7['push'](_0x5bb7e7['shift']());}}}(a1_0x3e00,0x82e55));import a1_0xc1832d from'chalk';import a1_0x405949 from'figlet';function a1_0x3e00(){const _0x2e2971=['exit','Configure:','ANSI\x20Shadow','6LWkwFg','30swObPI','\x0aCurrent\x20configuration:','1981746oLcEoP','37208CrfcSP','dim','includes','list','format','green','log','enhance','141302oTeaLX','reset','🔄\x20\x20Reset\x20all\x20settings','prompt','message','full','yellow','296hCpvVE','[a-zA-Z]','action','577180hycXgQ','red','yellowBright','.strictbranchrc','1796976nSSVYz','configure','⚙️\x20\x20\x20Configure\x20settings','9745439nWkWtX','error','50APGiTq','textSync','\x0a⚠️\x20\x20Error:\x20','cwd','452976MdVZOO','cyan','new_branch','feature','ticketFormat','\x20A\x20structured\x20Git\x20branch\x20workflow\x0a','hotfix','\x0a✗\x20Failed:\x20','test','prodBranch','branches','STRICT-BRANCH','hasTicket','bgBlack','\x0aThanks\x20for\x20using\x20Strict-Branch\x20CLI!\x20👋\x0a','✏️\x20\x20\x20Change\x20branch\x20names','stringify','devBranch','bold','🔙\x20\x20Back\x20to\x20main\x20menu','❌\x20\x20Exit','What\x20would\x20you\x20like\x20to\x20do?','back','blue'];a1_0x3e00=function(){return _0x2e2971;};return a1_0x3e00();}import a1_0x59e014 from'inquirer';import a1_0xa6b601 from'path';import{simpleGit}from'simple-git';import{askBranchDescription,askBranchType,askEnhanceType,askTicketId}from'./asks.js';import{createBranch,getStoredBranches}from'./storage.js';import{requireInitialSetup,resetAllSettings,updateBranchNames,updateTicketFormat}from'./utils.js';const git=simpleGit(),CONFIG_PATH=a1_0xa6b601['resolve'](process[a1_0xa57907(0xc9)](),a1_0xa57907(0xc0)),showHeader=()=>{const _0x34f89d=a1_0xa57907;console[_0x34f89d(0xb1)](a1_0xc1832d[_0x34f89d(0x9e)][_0x34f89d(0xd7)][_0x34f89d(0xbf)](a1_0x405949[_0x34f89d(0xc7)](_0x34f89d(0xd5),{'font':_0x34f89d(0xa6),'horizontalLayout':_0x34f89d(0xb8)}))),console[_0x34f89d(0xb1)](a1_0xc1832d[_0x34f89d(0xac)](_0x34f89d(0xcf)));},showMainMenu=async()=>{const _0x5ac534=a1_0xa57907,{commandType:_0x4bb9af}=await a1_0x59e014[_0x5ac534(0xb6)]([{'name':'commandType','type':_0x5ac534(0xae),'message':a1_0xc1832d[_0x5ac534(0xa3)][_0x5ac534(0x9e)](_0x5ac534(0xa1)),'choices':[{'name':'🌱\x20\x20Create\x20new\x20branch','value':_0x5ac534(0xcc)},{'name':_0x5ac534(0xc3),'value':_0x5ac534(0xc2)},{'name':_0x5ac534(0xa0),'value':_0x5ac534(0xa4)}]}]);return _0x4bb9af;},generateRegexFromFormat=_0x2de1b5=>{const _0x202436=a1_0xa57907;let _0x5f1d91='^';for(const _0x2a9670 of _0x2de1b5){if(/\d/[_0x202436(0xd2)](_0x2a9670))_0x5f1d91+='\x5cd';else{if(/[a-zA-Z]/['test'](_0x2a9670))_0x5f1d91+=_0x202436(0xbb);else _0x2a9670==='-'||_0x2a9670==='_'?_0x5f1d91+='\x5c'+_0x2a9670:_0x5f1d91+='.';}}return _0x5f1d91+='$',new RegExp(_0x5f1d91);},runConfiguration=async()=>{const _0x4c91ae=a1_0xa57907;while(!![]){console['log'](a1_0xc1832d[_0x4c91ae(0xb9)](_0x4c91ae(0xa9)));const _0x24bfc=getStoredBranches();console[_0x4c91ae(0xb1)](a1_0xc1832d[_0x4c91ae(0xac)](JSON[_0x4c91ae(0x9c)](_0x24bfc,null,0x2)));const {action:_0x2c244d}=await a1_0x59e014[_0x4c91ae(0xb6)]([{'name':_0x4c91ae(0xbc),'type':_0x4c91ae(0xae),'message':_0x4c91ae(0xa5),'choices':[{'name':_0x4c91ae(0x9b),'value':_0x4c91ae(0xd4)},{'name':'🔢\x20\x20Change\x20ticket\x20format','value':_0x4c91ae(0xaf)},{'name':_0x4c91ae(0xb5),'value':'reset'},{'name':_0x4c91ae(0x9f),'value':_0x4c91ae(0xa2)}]}]);switch(_0x2c244d){case'branches':await updateBranchNames();break;case _0x4c91ae(0xaf):await updateTicketFormat();break;case _0x4c91ae(0xb4):await resetAllSettings();break;case'back':return;}}},runBranchCreation=async()=>{const _0x4e1c9e=a1_0xa57907,_0x42d9be=await requireInitialSetup(),{branchType:_0x5467c8}=await askBranchType();let _0x48540c=_0x5467c8;if([_0x4e1c9e(0xcd),'bugfix',_0x4e1c9e(0xd0)][_0x4e1c9e(0xad)](_0x5467c8)){const {ticketId:_0x334af6}=await askTicketId(generateRegexFromFormat(_0x42d9be[_0x4e1c9e(0xce)]),_0x42d9be[_0x4e1c9e(0xce)]);_0x48540c+='/'+_0x334af6;}else{if(_0x5467c8===_0x4e1c9e(0xb2)&&(await askEnhanceType())[_0x4e1c9e(0xd6)]){const {ticketId:_0x1b2425}=await askTicketId(generateRegexFromFormat(_0x42d9be[_0x4e1c9e(0xce)]),_0x42d9be[_0x4e1c9e(0xce)]);_0x48540c+='/'+_0x1b2425;}}const {branchDescription:_0x5837b5}=await askBranchDescription();_0x48540c+='_'+_0x5837b5['replace'](/\s+/g,'-');try{const _0x56c11c=_0x5467c8==='hotfix'?_0x42d9be['prodBranch']:_0x42d9be[_0x4e1c9e(0x9d)];await createBranch(_0x48540c,_0x56c11c),console[_0x4e1c9e(0xb1)](a1_0xc1832d[_0x4e1c9e(0xb0)][_0x4e1c9e(0x9e)]('\x0a✓\x20Created\x20branch:\x20'+a1_0xc1832d[_0x4e1c9e(0xcb)](_0x48540c)));}catch(_0x550c3d){console[_0x4e1c9e(0xc5)](a1_0xc1832d[_0x4e1c9e(0xbe)][_0x4e1c9e(0x9e)](_0x4e1c9e(0xd1)+_0x550c3d[_0x4e1c9e(0xb7)]));}},runCLI=async()=>{const _0x32e7e7=a1_0xa57907;showHeader();try{const _0x3c64c8=getStoredBranches();console[_0x32e7e7(0xb1)](_0x3c64c8);(!_0x3c64c8[_0x32e7e7(0x9d)]||!_0x3c64c8[_0x32e7e7(0xd3)]||!_0x3c64c8[_0x32e7e7(0xce)])&&await requireInitialSetup();let _0x870521;do{_0x870521=await showMainMenu();switch(_0x870521){case _0x32e7e7(0xcc):await runBranchCreation();break;case _0x32e7e7(0xc2):await runConfiguration();break;}}while(_0x870521!==_0x32e7e7(0xa4));console[_0x32e7e7(0xb1)](a1_0xc1832d[_0x32e7e7(0xac)](_0x32e7e7(0x9a)));}catch(_0x17da87){console['error'](a1_0xc1832d[_0x32e7e7(0xbe)][_0x32e7e7(0x9e)](_0x32e7e7(0xc8)+_0x17da87[_0x32e7e7(0xb7)])),process[_0x32e7e7(0xa4)](0x1);}};runCLI();