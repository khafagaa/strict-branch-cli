#!/usr/bin/env node
const a1_0xe70cfb=a1_0x1303;(function(_0xa70295,_0x2d9959){const _0x5d00a1=a1_0x1303,_0x38f412=_0xa70295();while(!![]){try{const _0x3fd60a=parseInt(_0x5d00a1(0x14c))/0x1+-parseInt(_0x5d00a1(0x13d))/0x2+-parseInt(_0x5d00a1(0x130))/0x3+-parseInt(_0x5d00a1(0x142))/0x4*(-parseInt(_0x5d00a1(0x159))/0x5)+-parseInt(_0x5d00a1(0x12a))/0x6+parseInt(_0x5d00a1(0x161))/0x7*(parseInt(_0x5d00a1(0x146))/0x8)+-parseInt(_0x5d00a1(0x166))/0x9*(-parseInt(_0x5d00a1(0x154))/0xa);if(_0x3fd60a===_0x2d9959)break;else _0x38f412['push'](_0x38f412['shift']());}catch(_0x1a7e41){_0x38f412['push'](_0x38f412['shift']());}}}(a1_0x5f39,0x30356));const a1_0xe01ba5=(function(){let _0x4fe706=!![];return function(_0x23f918,_0x3b363f){const _0x38d4f6=_0x4fe706?function(){const _0x199296=a1_0x1303;if(_0x3b363f){const _0x9ffd85=_0x3b363f[_0x199296(0x132)](_0x23f918,arguments);return _0x3b363f=null,_0x9ffd85;}}:function(){};return _0x4fe706=![],_0x38d4f6;};}()),a1_0x353681=a1_0xe01ba5(this,function(){const _0x2b2999=a1_0x1303;return a1_0x353681[_0x2b2999(0x137)]()[_0x2b2999(0x14d)](_0x2b2999(0x158))[_0x2b2999(0x137)]()[_0x2b2999(0x145)](a1_0x353681)[_0x2b2999(0x14d)](_0x2b2999(0x158));});a1_0x353681();function a1_0x1303(_0x1c359e,_0x2895bb){const _0x107992=a1_0x5f39();return a1_0x1303=function(_0x353681,_0xe01ba5){_0x353681=_0x353681-0x127;let _0x5f3905=_0x107992[_0x353681];return _0x5f3905;},a1_0x1303(_0x1c359e,_0x2895bb);}import a1_0x492bed from'chalk';import a1_0x377b7e from'figlet';import a1_0x361adb from'inquirer';import a1_0x591e55 from'path';import{simpleGit}from'simple-git';import{askBranchDescription,askBranchType,askEnhanceType,askTicketId}from'./asks.js';import{createBranch,getStoredBranches}from'./storage.js';import{requireInitialSetup,resetAllSettings,updateBranchNames,updateTicketFormat}from'./utils.js';function a1_0x5f39(){const _0x3e5f62=['cyan','217774ZhROAB','\x0a⚠️\x20\x20Error:\x20','What\x20would\x20you\x20like\x20to\x20do?','cwd','enhance','28Uetpbr','prodBranch','✏️\x20\x20\x20Change\x20branch\x20names','constructor','1089904DkXHcE','red','reset','dim','hasTicket','resolve','30187DvJErH','search','feature','error','stringify','bugfix','action','test','10ynNhHL','⚙️\x20\x20Configure\x20settings','\x0a✓\x20Created\x20branch:\x20','🔙\x20\x20Back\x20to\x20main\x20menu','(((.+)+)+)+$','173320iWANni','list','commandType','yellow','hotfix','\x0aCurrent\x20configuration:','textSync','back','7RYuAzs','replace','Configure:','🔄\x20\x20Reset\x20all\x20settings','\x20A\x20structured\x20Git\x20branch\x20workflow\x0a','1261449yNzohQ','format','baseBranch','full','579054kCTzDf','configure','branches','yellowBright','ticketFormat','log','439128XMhGlt','ANSI\x20Shadow','apply','🌱\x20\x20Create\x20new\x20branch','.strictbranchrc','exit','message','toString','[a-zA-Z]','bold','prompt','new_branch'];a1_0x5f39=function(){return _0x3e5f62;};return a1_0x5f39();}const git=simpleGit(),CONFIG_PATH=a1_0x591e55[a1_0xe70cfb(0x14b)](process[a1_0xe70cfb(0x140)](),a1_0xe70cfb(0x134)),showHeader=()=>{const _0x5c5083=a1_0xe70cfb;console[_0x5c5083(0x12f)](a1_0x492bed[_0x5c5083(0x139)]['bgBlack'][_0x5c5083(0x12d)](a1_0x377b7e[_0x5c5083(0x15f)]('STRICT-BRANCH',{'font':_0x5c5083(0x131),'horizontalLayout':_0x5c5083(0x129)}))),console[_0x5c5083(0x12f)](a1_0x492bed['dim'](_0x5c5083(0x165)));},showMainMenu=async()=>{const _0x433fb7=a1_0xe70cfb,{commandType:_0x530e69}=await a1_0x361adb[_0x433fb7(0x13a)]([{'name':_0x433fb7(0x15b),'type':_0x433fb7(0x15a),'message':a1_0x492bed['blue'][_0x433fb7(0x139)](_0x433fb7(0x13f)),'choices':[{'name':_0x433fb7(0x133),'value':_0x433fb7(0x13b)},{'name':_0x433fb7(0x155),'value':'configure'},{'name':'❌\x20\x20Exit','value':'exit'}]}]);return _0x530e69;},generateRegexFromFormat=_0x599326=>{const _0x3cf0ef=a1_0xe70cfb;let _0x493c39='^';for(const _0x3d5d4a of _0x599326){if(/\d/[_0x3cf0ef(0x153)](_0x3d5d4a))_0x493c39+='\x5cd';else{if(/[a-zA-Z]/[_0x3cf0ef(0x153)](_0x3d5d4a))_0x493c39+=_0x3cf0ef(0x138);else _0x3d5d4a==='-'||_0x3d5d4a==='_'?_0x493c39+='\x5c'+_0x3d5d4a:_0x493c39+='.';}}return _0x493c39+='$',new RegExp(_0x493c39);},runConfiguration=async()=>{const _0xe58633=a1_0xe70cfb;while(!![]){console[_0xe58633(0x12f)](a1_0x492bed[_0xe58633(0x15c)](_0xe58633(0x15e)));const _0x54beb6=getStoredBranches();console['log'](a1_0x492bed[_0xe58633(0x149)](JSON[_0xe58633(0x150)](_0x54beb6,null,0x2)));const {action:_0x8e99c8}=await a1_0x361adb[_0xe58633(0x13a)]([{'name':_0xe58633(0x152),'type':'list','message':_0xe58633(0x163),'choices':[{'name':_0xe58633(0x144),'value':_0xe58633(0x12c)},{'name':'🔢\x20\x20Change\x20ticket\x20format','value':'format'},{'name':_0xe58633(0x164),'value':_0xe58633(0x148)},{'name':_0xe58633(0x157),'value':'back'}]}]);switch(_0x8e99c8){case'branches':await updateBranchNames();break;case _0xe58633(0x127):await updateTicketFormat();break;case _0xe58633(0x148):await resetAllSettings();break;case _0xe58633(0x160):return;}}},runBranchCreation=async()=>{const _0x230e13=a1_0xe70cfb,_0x401bcc=await requireInitialSetup(),{branchType:_0xe05647}=await askBranchType();let _0x48b5d1=_0xe05647;if([_0x230e13(0x14e),_0x230e13(0x151),_0x230e13(0x15d)]['includes'](_0xe05647)){const {ticketId:_0x59d317}=await askTicketId(generateRegexFromFormat(_0x401bcc[_0x230e13(0x12e)]),_0x401bcc[_0x230e13(0x12e)]);_0x48b5d1+='/'+_0x59d317;}else{if(_0xe05647===_0x230e13(0x141)&&(await askEnhanceType())[_0x230e13(0x14a)]){const {ticketId:_0x10c553}=await askTicketId(generateRegexFromFormat(_0x401bcc[_0x230e13(0x12e)]),_0x401bcc[_0x230e13(0x12e)]);_0x48b5d1+='/'+_0x10c553;}}const {branchDescription:_0x526d6e}=await askBranchDescription();_0x48b5d1+='_'+_0x526d6e[_0x230e13(0x162)](/\s+/g,'-');try{const _0x5d42b3=_0xe05647===_0x230e13(0x15d)?_0x401bcc[_0x230e13(0x143)]:_0x401bcc[_0x230e13(0x128)];await createBranch(_0x48b5d1,_0x5d42b3),console[_0x230e13(0x12f)](a1_0x492bed['green'][_0x230e13(0x139)](_0x230e13(0x156)+a1_0x492bed[_0x230e13(0x13c)](_0x48b5d1)));}catch(_0x143394){console[_0x230e13(0x14f)](a1_0x492bed[_0x230e13(0x147)]['bold']('\x0a✗\x20Failed:\x20'+_0x143394['message']));}},runCLI=async()=>{const _0x5b2726=a1_0xe70cfb;showHeader();try{const _0x374eb0=getStoredBranches();console['log'](_0x374eb0);(!_0x374eb0[_0x5b2726(0x128)]||!_0x374eb0[_0x5b2726(0x143)]||!_0x374eb0[_0x5b2726(0x12e)])&&await requireInitialSetup();let _0x2fb35b;do{_0x2fb35b=await showMainMenu();switch(_0x2fb35b){case'new_branch':await runBranchCreation();break;case _0x5b2726(0x12b):await runConfiguration();break;}}while(_0x2fb35b!==_0x5b2726(0x135));console[_0x5b2726(0x12f)](a1_0x492bed[_0x5b2726(0x149)]('\x0aThanks\x20for\x20using\x20Strict-Branch\x20CLI!\x20👋\x0a'));}catch(_0x3e8973){console[_0x5b2726(0x14f)](a1_0x492bed['red'][_0x5b2726(0x139)](_0x5b2726(0x13e)+_0x3e8973[_0x5b2726(0x136)])),process[_0x5b2726(0x135)](0x1);}};runCLI();